define(["jquery","select2"],function(a){"use strict";return a.fn.resourceSearchEntity=function(b){return b=a.extend({limit:10},b),this.each(function(){var c=a(this),d=new Function("data",c.data("format"));c.select2({placeholder:"Rechercher ...",allowClear:1==c.data("clear"),minimumInputLength:3,templateResult:d,ajax:{delay:300,url:c.data("search"),dataType:"json",data:function(a){return{query:a.term,page:a.page,limit:b.limit}},processResults:function(a,c){return c.page=c.page||1,{results:a.results,pagination:{more:c.page*b.limit<a.total_count}}},escapeMarkup:function(a){return a}}})}),this},{init:function(a){a.resourceSearchEntity()}}});